---
// src/pages/index.astro
---

<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Portfolio MMI | Digital Brew</title>
    <meta name="description" content="Portfolio Ã‰tudiant MMI - VidÃ©o, Web & Communication" />
    
    <!-- Import des Polices Google -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;600&family=VT323&display=swap" rel="stylesheet">
</head>

<!-- 
  Couleurs (Rappel Config Tailwind) :
  bg: #1A1512
  accent: #FF9F43
  secondary: #00FFFF
-->

<body class="bg-[#1A1512] text-[#F8EFBA] font-code overflow-x-hidden antialiased selection:bg-[#FF9F43] selection:text-[#1A1512]">

    <!-- 1. TEXTURE DE BRUIT (Global) -->
    <div class="fixed inset-0 z-[40] pointer-events-none opacity-[0.03] mix-blend-overlay" style="background-image: url('data:image/svg+xml,%3Csvg viewBox=\'0 0 200 200\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cfilter id=\'noiseFilter\'%3E%3CfeTurbulence type=\'fractalNoise\' baseFrequency=\'0.65\' numOctaves=\'3\' stitchTiles=\'stitch\'/%3E%3C/filter%3E%3Crect width=\'100%25\' height=\'100%25\' filter=\'url(%23noiseFilter)\'/%3E%3C/svg%3E');"></div>

    <!-- 2. INTRO SÃ‰QUENCE (Overlay) -->
    <div id="intro-overlay" class="fixed inset-0 z-[100] flex flex-col items-center justify-center bg-[#1A1512] text-[#FF9F43]">
        
        <!-- Effet Scanlines -->
        <div class="absolute inset-0 z-0 opacity-20 pointer-events-none" style="background: repeating-linear-gradient(0deg, transparent, transparent 2px, #000 3px);"></div>

        <div id="loader-content" class="relative z-10 text-center font-pixel">
            <!-- Logo SVG SimplifiÃ© -->
            <div class="w-20 h-20 mx-auto mb-6 border-2 border-[#FF9F43] p-4 shadow-[0_0_15px_rgba(255,159,67,0.3)] animate-pulse">
                <svg viewBox="0 0 24 24" fill="currentColor" class="w-full h-full"><path d="M2,21H20V19H2M20,8H18V5H20M20,3H4V13A4,4 0 0,0 8,17H14A4,4 0 0,0 18,13V10H20A2,2 0 0,0 22,8V5C22,3.89 21.1,3 20,3Z" /></svg>
            </div>
            
            <p class="text-3xl tracking-widest">BREWING IDEAS... <span id="counter" class="tabular-nums">0</span>%</p>
        </div>

        <button id="wake-btn" class="hidden relative z-20 mt-10 px-8 py-3 font-pixel text-4xl border-2 border-[#00FFFF] text-[#00FFFF] hover:bg-[#00FFFF] hover:text-[#1A1512] transition-all duration-100 shadow-[4px_4px_0_0_rgba(0,255,255,0.5)] active:translate-x-[2px] active:translate-y-[2px] active:shadow-none uppercase">
            [ WAKE UP ]
        </button>
    </div>

    <!-- 3. EASTER EGG MODAL (CachÃ©) -->
    <div id="easter-egg" class="fixed inset-0 z-[200] hidden items-center justify-center bg-black/95 text-[#00FF00] font-pixel flex-col">
        <div class="text-8xl animate-bounce mb-4">ðŸ‘¾</div>
        <h2 class="text-6xl text-center">KONAMI CODE ACTIVATED</h2>
        <p class="text-2xl mt-4 font-code text-white">Full Stack Dev Mode: UNLOCKED</p>
    </div>

    <!-- 4. CONTENU PRINCIPAL DU SITE -->
    <main id="main-content" class="opacity-0 transition-opacity duration-1000">

        <!-- A. NAV (Simple) -->
        <nav class="fixed top-0 left-0 w-full z-50 px-6 py-4 flex justify-between items-center mix-blend-difference">
            <div class="font-pixel text-3xl text-[#FF9F43]">JOHN.MMI</div>
            <a href="#contact" class="hidden md:block font-code text-sm border border-[#FF9F43] px-4 py-1 rounded-full text-[#FF9F43] hover:bg-[#FF9F43] hover:text-[#1A1512] transition-colors">Discuter</a>
        </nav>

        <!-- B. HERO HEADER -->
        <section class="relative h-screen flex items-center justify-center overflow-hidden">
            <!-- Background VidÃ©o (Placeholder css) -->
            <div class="absolute inset-0 z-0 bg-gradient-to-b from-[#1A1512]/80 to-[#1A1512] z-10"></div>
            <!-- Ici tu mettras ta balise <video> en autoplay muted loop object-cover -->
            <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1550745165-9bc0b252726f?q=80&w=2070&auto=format&fit=crop')] bg-cover bg-center opacity-40 grayscale contrast-125"></div>

            <div class="relative z-20 text-center px-4">
                <h1 class="font-pixel text-6xl md:text-9xl mb-4 text-white drop-shadow-[0_0_10px_rgba(255,255,255,0.5)]">
                    CRÃ‰ATIF <span class="text-[#FF9F43]">///</span> DIGITAL
                </h1>
                <p class="font-code text-[#00FFFF] text-lg md:text-xl h-8" id="typewriter"></p>
                <div class="mt-12 animate-bounce">
                    <svg class="w-6 h-6 mx-auto text-white opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                </div>
            </div>
        </section>

        <!-- C. ABOUT & SHOWREEL -->
        <section class="py-24 px-6 md:px-20 max-w-7xl mx-auto grid md:grid-cols-2 gap-12 items-center">
            <div class="space-y-6">
                <h2 class="font-pixel text-5xl text-[#FF9F43] mb-8">01. PROFIL_</h2>
                <p class="text-lg leading-relaxed text-gray-300">
                    Ã‰tudiant en derniÃ¨re annÃ©e de <strong class="text-[#00FFFF]">BUT MMI</strong>. Je ne choisis pas entre le code et la vidÃ©o : je fais les deux. 
                    Mon approche est simple : raconter des histoires visuelles soutenues par une technique web solide.
                </p>
                <div class="flex flex-wrap gap-4 font-pixel text-xl">
                    <span class="bg-[#2A2522] px-3 py-1 border border-[#FF9F43]">VidÃ©o</span>
                    <span class="bg-[#2A2522] px-3 py-1 border border-[#FF9F43]">Motion</span>
                    <span class="bg-[#2A2522] px-3 py-1 border border-[#00FFFF] text-[#00FFFF]">Front-End</span>
                </div>
            </div>
            <div class="relative group">
                <!-- Cadre RÃ©tro -->
                <div class="absolute -inset-2 border-2 border-[#00FFFF] opacity-50 group-hover:translate-x-2 group-hover:translate-y-2 transition-transform duration-300"></div>
                <div class="aspect-video bg-[#000] flex items-center justify-center border border-gray-700 relative overflow-hidden group-hover:border-[#00FFFF] transition-colors">
                    <span class="font-pixel text-2xl z-10">PLAY SHOWREEL 2025 â–¶</span>
                    <!-- Effet grain overlay -->
                    <div class="absolute inset-0 bg-white opacity-5 group-hover:opacity-10 transition-opacity"></div>
                </div>
            </div>
        </section>

        <!-- D. PROJETS (Grid) -->
        <section class="py-24 bg-[#14100E] border-y border-[#2A2522]">
            <div class="px-6 md:px-12 max-w-[1600px] mx-auto">
                <div class="flex justify-between items-end mb-16">
                    <h2 class="font-pixel text-5xl text-[#FF9F43]">02. SELECT MISSION_</h2>
                    <div class="hidden md:flex gap-4 font-code text-sm">
                        <button class="text-[#00FFFF] underline decoration-wavy">[ ALL ]</button>
                        <button class="text-gray-500 hover:text-white">[ VIDEO ]</button>
                        <button class="text-gray-500 hover:text-white">[ WEB ]</button>
                    </div>
                </div>

                <!-- Grille Masonry SimplifiÃ©e -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Projet 1 -->
                    <article class="group cursor-pointer">
                        <div class="relative aspect-[4/3] bg-gray-800 border-2 border-transparent group-hover:border-[#FF9F43] transition-all overflow-hidden mb-4">
                            <div class="absolute inset-0 bg-[#FF9F43]/20 mix-blend-multiply group-hover:opacity-0 transition-opacity"></div>
                            <img src="https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=1000&auto=format&fit=crop" class="w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-500 transform group-hover:scale-105" alt="Projet">
                        </div>
                        <h3 class="font-pixel text-2xl group-hover:text-[#FF9F43] transition-colors">Neon City Doc</h3>
                        <p class="text-xs text-gray-500 mt-1">PREMIERE PRO â€¢ DOCUMENTAIRE</p>
                    </article>

                    <!-- Projet 2 -->
                    <article class="group cursor-pointer md:mt-12">
                        <div class="relative aspect-[4/3] bg-gray-800 border-2 border-transparent group-hover:border-[#00FFFF] transition-all overflow-hidden mb-4">
                            <div class="absolute inset-0 bg-[#00FFFF]/20 mix-blend-multiply group-hover:opacity-0 transition-opacity"></div>
                            <img src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?q=80&w=1000&auto=format&fit=crop" class="w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-500 transform group-hover:scale-105" alt="Projet">
                        </div>
                        <h3 class="font-pixel text-2xl group-hover:text-[#00FFFF] transition-colors">Dev Portfolio</h3>
                        <p class="text-xs text-gray-500 mt-1">REACT â€¢ TAILWIND</p>
                    </article>

                     <!-- Projet 3 -->
                     <article class="group cursor-pointer">
                        <div class="relative aspect-[4/3] bg-gray-800 border-2 border-transparent group-hover:border-[#FF9F43] transition-all overflow-hidden mb-4">
                            <div class="absolute inset-0 bg-[#FF9F43]/20 mix-blend-multiply group-hover:opacity-0 transition-opacity"></div>
                            <img src="https://images.unsplash.com/photo-1550751827-4bd374c3f58b?q=80&w=1000&auto=format&fit=crop" class="w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-500 transform group-hover:scale-105" alt="Projet">
                        </div>
                        <h3 class="font-pixel text-2xl group-hover:text-[#FF9F43] transition-colors">Cyber Sec Camp</h3>
                        <p class="text-xs text-gray-500 mt-1">COM â€¢ BRANDING</p>
                    </article>
                </div>
            </div>
        </section>

        <!-- E. SKILLS (RPG Stats) -->
        <section class="py-24 px-6 max-w-4xl mx-auto">
            <h2 class="font-pixel text-5xl text-[#FF9F43] mb-12 text-center">03. STATS_</h2>
            
            <div class="bg-[#0f0c0b] border border-[#2A2522] p-8 md:p-12 shadow-[10px_10px_0_0_#2A2522]">
                <div class="space-y-8 font-code">
                    
                    <!-- Skill Item -->
                    <div>
                        <div class="flex justify-between mb-2 text-[#00FFFF]">
                            <span>VIDEO EDITING</span>
                            <span>LVL. 90</span>
                        </div>
                        <div class="h-4 bg-[#2A2522] p-[2px]">
                            <div class="h-full bg-[#00FFFF] w-[90%] shadow-[0_0_10px_#00FFFF]"></div>
                        </div>
                    </div>

                    <!-- Skill Item -->
                    <div>
                        <div class="flex justify-between mb-2 text-[#FF9F43]">
                            <span>CREATIVE CODING</span>
                            <span>LVL. 75</span>
                        </div>
                        <div class="h-4 bg-[#2A2522] p-[2px]">
                            <div class="h-full bg-[#FF9F43] w-[75%] shadow-[0_0_10px_#FF9F43]"></div>
                        </div>
                    </div>

                    <!-- Skill Item -->
                    <div>
                        <div class="flex justify-between mb-2 text-pink-500">
                            <span>COMMUNICATION</span>
                            <span>LVL. 85</span>
                        </div>
                        <div class="h-4 bg-[#2A2522] p-[2px]">
                            <div class="h-full bg-pink-500 w-[85%] shadow-[0_0_10px_pink]"></div>
                        </div>
                    </div>

                </div>
                
                <div class="mt-12 pt-8 border-t border-[#2A2522] grid grid-cols-2 md:grid-cols-4 gap-4 text-center text-xs text-gray-500">
                    <div class="border border-[#2A2522] py-2">Adobe Suite</div>
                    <div class="border border-[#2A2522] py-2">Figma</div>
                    <div class="border border-[#2A2522] py-2">Astro / React</div>
                    <div class="border border-[#2A2522] py-2">Git / Bash</div>
                </div>
            </div>
        </section>

        <!-- F. CONTACT (Terminal) -->
        <section id="contact" class="py-24 px-6 md:px-0 bg-[#0f0c0b] text-center border-t border-[#2A2522]">
            <h2 class="font-pixel text-5xl mb-8">04. SEND_DATA_</h2>
            <div class="max-w-xl mx-auto text-left font-code text-sm">
                <div class="bg-[#1A1512] border border-gray-700 p-1 rounded-t-lg flex gap-2 items-center px-4 py-2">
                    <div class="w-3 h-3 rounded-full bg-red-500"></div>
                    <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                    <div class="w-3 h-3 rounded-full bg-green-500"></div>
                    <span class="ml-4 text-gray-500">bash â€” contact-form</span>
                </div>
                <form class="bg-black/50 border-x border-b border-gray-700 p-8 space-y-6">
                    <div class="flex flex-col">
                        <label class="text-[#FF9F43] mb-2">$ input user_email</label>
                        <input type="email" placeholder="votre@email.com" class="bg-transparent border-b border-gray-700 focus:border-[#00FFFF] outline-none text-white py-2 placeholder-gray-800 transition-colors">
                    </div>
                    <div class="flex flex-col">
                        <label class="text-[#FF9F43] mb-2">$ input message</label>
                        <textarea rows="4" placeholder="Tapez votre message ici..." class="bg-transparent border-b border-gray-700 focus:border-[#00FFFF] outline-none text-white py-2 placeholder-gray-800 transition-colors resize-none"></textarea>
                    </div>
                    <button type="submit" class="mt-4 w-full border border-[#00FFFF] text-[#00FFFF] py-3 hover:bg-[#00FFFF] hover:text-black transition-all font-pixel text-xl">
                        > EXECUTE SEND
                    </button>
                </form>
            </div>

            <footer class="mt-20 text-gray-600 text-xs font-code">
                <p>MMI 2025 â€¢ BUILT WITH ASTRO & CAFFEINE</p>
                <div class="flex justify-center gap-6 mt-4 text-xl">
                    <a href="#" class="hover:text-[#FF9F43] transition-colors"><i class="fab fa-linkedin"></i> LI</a>
                    <a href="#" class="hover:text-[#FF9F43] transition-colors">GH</a>
                    <a href="#" class="hover:text-[#FF9F43] transition-colors">BE</a>
                </div>
            </footer>
        </section>

    </main>

    <!-- SCRIPT (GSAP + Logic) -->
    <script>
        import { gsap } from "gsap";
        import Lenis from "@studio-freight/lenis";

        // 1. SMOOTH SCROLL (Lenis)
        const lenis = new Lenis();
        function raf(time) {
            lenis.raf(time);
            requestAnimationFrame(raf);
        }
        requestAnimationFrame(raf);

        // 2. TYPEWRITER EFFECT
        const text = "Je code, je filme et je crÃ©e.";
        const typeContainer = document.getElementById("typewriter");
        let i = 0;
        function typeWriter() {
            if (i < text.length && typeContainer) {
                typeContainer.innerHTML += text.charAt(i);
                i++;
                setTimeout(typeWriter, 50); // Vitesse de frappe
            }
        }

        // 3. INTRO ANIMATION
        const overlay = document.getElementById('intro-overlay');
        const btn = document.getElementById('wake-btn');
        const counter = document.getElementById('counter');
        const mainContent = document.getElementById('main-content');
        const body = document.body;

        // Bloquer le scroll au dÃ©but
        body.style.overflow = 'hidden';

        let tl = gsap.timeline();

        // Compteur 0 -> 99
        tl.to(counter, {
            innerText: 99,
            duration: 2,
            snap: { innerText: 1 },
            ease: "power1.inOut",
            onUpdate: function() {
                if(counter) counter.innerText = Math.ceil(this.targets()[0].innerText);
            }
        });

        // Apparition bouton
        tl.to(btn, { display: "block", opacity: 0, duration: 0 });
        tl.to(btn, { opacity: 1, duration: 0.1, repeat: 4, yoyo: true });

        // Clic sur WAKE UP
        if(btn && overlay && mainContent) {
            btn.addEventListener('click', () => {
                const endTl = gsap.timeline();
                
                // Effet CRT Off
                endTl.to(overlay, { 
                    scaleY: 0.005, 
                    scaleX: 1,
                    duration: 0.2,
                    ease: "power2.in"
                })
                .to(overlay, { 
                    width: "100%",
                    height: "2px",
                    background: "#FFF",
                    duration: 0.1 
                })
                .to(overlay, {
                    opacity: 0,
                    duration: 0.2,
                    onComplete: () => {
                        overlay.style.display = 'none';
                        body.style.overflow = 'auto'; // RÃ©activer scroll
                        mainContent.style.opacity = '1'; // Afficher le site
                        
                        // Lancer le typewriter aprÃ¨s l'intro
                        setTimeout(typeWriter, 500);
                        
                        // Petite animation d'entrÃ©e des sections
                        gsap.from("h1", { y: 50, opacity: 0, duration: 1, ease: "power3.out" });
                    }
                });
            });
        }

        // 4. KONAMI CODE
        const code = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
        let cursor = 0;
        const easterEggModal = document.getElementById('easter-egg');

        document.addEventListener('keydown', (e) => {
            cursor = (e.key === code[cursor]) ? cursor + 1 : 0;
            if (cursor === code.length) {
                if(easterEggModal) {
                    easterEggModal.style.display = 'flex';
                    setTimeout(() => {
                        easterEggModal.style.display = 'none';
                    }, 3000);
                }
                cursor = 0;
            }
        });

    </script>
</body>
</html>